<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <composite:interface>
        <composite:attribute name="movieList" 
                             shortDescription="The movie list" 
                             type="java.util.List"/>
        <composite:attribute name="userGroup" 
                             shortDescription="The group of the user"/>
    </composite:interface>

    <composite:implementation>
        <h:dataTable styleClass="table table-hover" value="#{cc.attrs.movieList}" var="movie">

            <h:column>
                <f:facet name="header">ID</f:facet>
                <h:outputText value="#{movie.id}"/>
            </h:column> 

            <h:column>
                <f:facet name="header">Titre</f:facet>
                <a href="#{movie.webLink}"><h:outputText value="#{movie.title}"/></a> 
            </h:column>

            <h:column rendered="#{cc.attrs.userGroup eq 'ADMINISTRATOR'}">
                <f:facet name="header">Edit</f:facet>
                <h:link outcome="/movie/movie_form">
                    <span class="glyphicon glyphicon-edit"/> Edit
                    <f:param name="id" value="#{movie.id}"/>
                </h:link>
            </h:column> 

        </h:dataTable>
    </composite:implementation>
</html>

